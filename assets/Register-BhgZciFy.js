import{u as N,a as y,b,r as u,c as v,j as s,d as P}from"./index-CbUrlerO.js";import{c as C,a as i,e as k,s as e,F as q,b as F,d as n,E as o}from"./auth.module-ClraqC2C.js";const I=()=>{const{notify:c}=N(),h=y(),d=b(),[t,p]=u.useState(!1),[l,x]=u.useState(!1),m=v(a=>a.auth.isLoading),f={username:"",email:"",password:"",confirmPassword:""},j=C({username:i().required("Username is required"),email:i().email("Invalid email address").required("Email is required"),password:i().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:i().oneOf([k("password"),null],"Passwords do not match").required("Password confirmation is required")}),w=async(a,{setSubmitting:r})=>{try{await h(P({username:a.username,email:a.email,password:a.password})).unwrap(),c("Registration successful!"),d("/login",{replace:!0})}catch{c("Registration failed. Please try again.","error")}finally{r(!1)}},g=a=>a.length<6?"red":a.length<10?"orange":"green";return s.jsx("div",{className:e.registerContainer,children:s.jsxs("div",{className:e.authCard,children:[s.jsx("h2",{children:"Money Guard"}),s.jsx(q,{initialValues:f,validationSchema:j,onSubmit:w,children:({isSubmitting:a,values:r})=>s.jsxs(F,{children:[s.jsxs("div",{className:e.inputContainer,children:[s.jsx("label",{htmlFor:"username",children:s.jsx("i",{className:"fa fa-user"})}),s.jsxs("div",{className:"column",children:[s.jsx(n,{type:"text",name:"username",id:"username",placeholder:"Name",className:e.registerInput}),s.jsx(o,{name:"username",component:"div",className:e.errorText})]})]}),s.jsxs("div",{className:e.inputContainer,children:[s.jsx("label",{htmlFor:"email",children:s.jsx("i",{className:"fa fa-envelope"})}),s.jsxs("div",{className:"column",children:[s.jsx(n,{type:"email",name:"email",id:"email",placeholder:"E-mail",className:e.registerInput}),s.jsx(o,{name:"email",component:"div",className:e.errorText})]})]}),s.jsxs("div",{className:e.inputContainer,children:[s.jsx("label",{htmlFor:"password",children:s.jsx("i",{className:"fa fa-lock"})}),s.jsxs("div",{className:"column",children:[s.jsx(n,{type:t?"text":"password",name:"password",id:"password",placeholder:"Password",className:e.registerInput}),s.jsx("button",{type:"button",onClick:()=>p(!t),className:e.showPasswordButton,children:s.jsx("i",{className:t?"fa fa-eye-slash":"fa fa-eye"})}),s.jsx("div",{children:s.jsx("div",{className:e.progressBar,style:{width:`${r.password.length/12*100}%`,backgroundColor:g(r.password),height:"5px",transition:"width 0.5s ease-in-out, background-color 0.5s ease-in-out"}})}),s.jsx(o,{name:"password",component:"div",className:e.errorText})]})]}),s.jsxs("div",{className:e.inputContainer,children:[s.jsx("label",{htmlFor:"confirmPassword",children:s.jsx("i",{className:"fa fa-lock"})}),s.jsxs("div",{className:"column",children:[s.jsx(n,{type:l?"text":"password",name:"confirmPassword",id:"confirmPassword",placeholder:"Confirm password",className:e.registerInput}),s.jsx("button",{type:"button",onClick:()=>x(!l),className:e.showPasswordButton,children:s.jsx("i",{className:l?"fa fa-eye-slash":"fa fa-eye"})}),s.jsx(o,{name:"confirmPassword",component:"div",className:e.errorText})]})]}),s.jsxs("div",{className:e.loginButtonsWrapper,children:[s.jsx("button",{type:"submit",disabled:a||m,className:e.loginButton,children:a||m?"Loading...":"Register"}),s.jsx("button",{type:"button",className:e.registerButton,onClick:()=>d("/login"),children:"Log In"})]})]})})]})})};export{I as default};
