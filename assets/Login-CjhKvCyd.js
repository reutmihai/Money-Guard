import{u as j,a as w,b as N,r as f,c as v,j as s,s as y,F as b,d as C,e as l,E as c,h as k}from"./index-Cdc4rT35.js";import{c as L,a as d,s as e}from"./auth.module-ocgHT6TQ.js";const I=()=>{const{notify:i}=j(),m=w(),n=N(),[o,u]=f.useState(!1),t=v(a=>a.auth.isLoading),h={email:"",password:""},p=L({email:d().email("Invalid email address").required("Email is required"),password:d().required("Password is required")}),x=async(a,{setSubmitting:r})=>{try{await m(k(a)).unwrap(),i("Login successful!"),n("/dashboard",{replace:!0})}catch{i("Incorrect email or password","error")}finally{r(!1)}},g=a=>a==="correctpassword"?"green":a.length<6?"red":"green";return s.jsx("div",{className:e.loginContainer,children:s.jsxs("div",{className:e.authCard,children:[s.jsxs("div",{children:[s.jsx("svg",{className:e["icon-logo"],children:s.jsx("use",{xlinkHref:`${y}#icon-logo`})}),s.jsx("h2",{className:e.loginTitle,children:"Money Guard"})]}),s.jsx(b,{initialValues:h,validationSchema:p,onSubmit:x,children:({isSubmitting:a,values:r})=>s.jsxs(C,{children:[s.jsxs("div",{className:e.inputContainer,children:[s.jsx("label",{htmlFor:"email",children:s.jsx("i",{className:"fa fa-envelope"})}),s.jsxs("div",{className:"column",children:[s.jsx(l,{type:"email",name:"email",id:"email",placeholder:"E-mail",className:e.loginInput}),s.jsx(c,{name:"email",component:"div",className:e.errorText})]})]}),s.jsxs("div",{className:e.inputContainer,children:[s.jsx("label",{htmlFor:"password",children:s.jsx("i",{className:"fa fa-lock"})}),s.jsxs("div",{className:"column",children:[s.jsx(l,{type:o?"text":"password",name:"password",id:"password",placeholder:"Password",className:e.loginInputPassword}),s.jsx("button",{type:"button",onClick:()=>u(!o),className:e.showPasswordButton,children:s.jsx("i",{className:o?"fa fa-eye-slash":"fa fa-eye"})}),s.jsx("div",{children:s.jsx("div",{className:e.progressBar,style:{width:`${r.password.length/12*100}%`,backgroundColor:g(r.password),height:"5px",transition:"width 0.5s ease-in-out, background-color 0.5s ease-in-out"}})}),s.jsx(c,{name:"password",component:"div",className:e.errorText})]})]}),s.jsxs("div",{className:e.loginButtonsWrapper,children:[s.jsx("button",{type:"submit",disabled:a||t,className:e.loginButton,children:a||t?"Loading...":"Log In"}),s.jsx("button",{type:"button",className:e.registerButton,onClick:()=>n("/Money-Guard/register"),children:"Register"})]})]})})]})})};export{I as default};
